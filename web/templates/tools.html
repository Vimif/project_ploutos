<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tools - Ploutos</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>
    
    <style>
        body {
            background: linear-gradient(135deg, #0f0c29, #302b63, #24243e);
            color: #fff;
        }
        
        .tool-panel {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .tool-header {
            border-bottom: 2px solid rgba(255, 255, 255, 0.1);
        }
        
        .stock-card {
            background: rgba(255, 255, 255, 0.05);
            border-left: 4px solid #00f260;
        }
        .stock-card.sell { border-left-color: #ff4757; }
        
        .positive { color: #00f260; }
        .negative { color: #ff4757; }
        
        .btn-primary {
            background: linear-gradient(45deg, #00f260, #0575e6);
            transition: all 0.3s;
        }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 5px 15px rgba(0, 242, 96, 0.3); }
        
        .btn-danger {
            background: linear-gradient(45deg, #ff4757, #ff6348);
            transition: all 0.3s;
        }
        .btn-danger:hover { transform: translateY(-2px); box-shadow: 0 5px 15px rgba(255, 71, 87, 0.5); }
    </style>
</head>
<body class="bg-gray-900 text-gray-100">
    
    <!-- üß† NAVIGATION HEADER -->
    {% include 'components/nav.html' %}
    
    <div class="container mx-auto px-4 py-6">
        
        <!-- Header -->
        <div class="text-center mb-8">
            <h1 class="text-4xl font-bold bg-gradient-to-r from-blue-400 to-purple-600 bg-clip-text text-transparent mb-2">
                üõ†Ô∏è PLOUTOS TRADER PRO - TOOLS
            </h1>
            <p class="text-gray-400">5 outils professionnels pour dominer le march√©</p>
        </div>
        
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
            
            <!-- PANEL 1: SCREENER -->
            <div class="tool-panel rounded-lg p-6">
                <div class="tool-header flex justify-between items-center pb-4 mb-4">
                    <h3 class="text-xl font-bold flex items-center gap-2">
                        <i class="fas fa-search text-blue-400"></i> Screener Automatique
                    </h3>
                    <button onclick="runScreener()" class="btn-primary px-4 py-2 rounded-lg font-bold">
                        ‚ñ∂Ô∏è Scanner
                    </button>
                </div>
                
                <div class="mb-4">
                    <label class="block mb-2 font-semibold text-sm">Tickers (s√©par√©s par virgule)</label>
                    <input type="text" id="screener-tickers" value="AAPL,NVDA,MSFT,GOOGL,AMZN,META,TSLA,JPM,BAC" 
                           class="w-full px-4 py-2 bg-gray-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-blue-500">
                </div>
                
                <div id="screener-results" class="max-h-96 overflow-y-auto"></div>
            </div>
            
            <!-- PANEL 2: BACKTEST -->
            <div class="tool-panel rounded-lg p-6">
                <div class="tool-header flex justify-between items-center pb-4 mb-4">
                    <h3 class="text-xl font-bold flex items-center gap-2">
                        <i class="fas fa-chart-line text-purple-400"></i> Backtesting
                    </h3>
                    <button onclick="runBacktest()" class="btn-primary px-4 py-2 rounded-lg font-bold">
                        ‚ñ∂Ô∏è Tester
                    </button>
                </div>
                
                <div class="mb-4">
                    <label class="block mb-2 font-semibold text-sm">Ticker</label>
                    <input type="text" id="backtest-ticker" value="AAPL" 
                           class="w-full px-4 py-2 bg-gray-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-blue-500">
                </div>
                
                <div class="mb-4">
                    <label class="block mb-2 font-semibold text-sm">Strat√©gie</label>
                    <select id="backtest-strategy" class="w-full px-4 py-2 bg-gray-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-blue-500">
                        <option value="rsi_mean_reversion">RSI Mean Reversion</option>
                        <option value="sma_crossover">SMA Crossover</option>
                        <option value="macd_momentum">MACD Momentum</option>
                        <option value="bollinger_bounce">Bollinger Bounce</option>
                    </select>
                </div>
                
                <div id="backtest-results" class="max-h-96 overflow-y-auto"></div>
            </div>
            
            <!-- PANEL 3: ALERTS -->
            <div class="tool-panel rounded-lg p-6">
                <div class="tool-header flex justify-between items-center pb-4 mb-4">
                    <h3 class="text-xl font-bold flex items-center gap-2">
                        <i class="fas fa-bell text-yellow-400"></i> Alertes Temps R√©el
                    </h3>
                    <button onclick="loadAlerts()" class="btn-primary px-4 py-2 rounded-lg font-bold">
                        üîÑ Refresh
                    </button>
                </div>
                
                <div class="mb-4">
                    <label class="block mb-2 font-semibold text-sm">Nouvelle Alerte</label>
                    <div class="grid grid-cols-12 gap-2">
                        <input type="text" id="alert-ticker" placeholder="AAPL" 
                               class="col-span-3 px-3 py-2 bg-gray-800 border border-gray-600 rounded-lg text-white text-sm focus:outline-none focus:border-blue-500">
                        <select id="alert-condition" class="col-span-4 px-3 py-2 bg-gray-800 border border-gray-600 rounded-lg text-white text-sm focus:outline-none focus:border-blue-500">
                            <option value="rsi_oversold">RSI Survente</option>
                            <option value="rsi_overbought">RSI Surachat</option>
                            <option value="price_above">Prix > </option>
                            <option value="price_below">Prix < </option>
                            <option value="volume_spike">Volume Spike</option>
                        </select>
                        <input type="number" id="alert-value" placeholder="30" 
                               class="col-span-3 px-3 py-2 bg-gray-800 border border-gray-600 rounded-lg text-white text-sm focus:outline-none focus:border-blue-500">
                        <button onclick="addAlert()" class="col-span-2 btn-primary rounded-lg font-bold text-sm">‚ûï</button>
                    </div>
                </div>
                
                <div id="alerts-list" class="max-h-96 overflow-y-auto"></div>
            </div>
            
            <!-- PANEL 4: PORTFOLIO -->
            <div class="tool-panel rounded-lg p-6">
                <div class="tool-header flex justify-between items-center pb-4 mb-4">
                    <h3 class="text-xl font-bold flex items-center gap-2">
                        <i class="fas fa-briefcase text-green-400"></i> Portfolio Tracker
                    </h3>
                    <button onclick="loadPortfolio()" class="btn-primary px-4 py-2 rounded-lg font-bold">
                        üîÑ Refresh
                    </button>
                </div>
                
                <div class="mb-4">
                    <label class="block mb-2 font-semibold text-sm">Ajouter Position</label>
                    <div class="grid grid-cols-12 gap-2">
                        <input type="text" id="portfolio-ticker" placeholder="AAPL" 
                               class="col-span-3 px-3 py-2 bg-gray-800 border border-gray-600 rounded-lg text-white text-sm focus:outline-none focus:border-blue-500">
                        <input type="number" id="portfolio-shares" placeholder="Shares" step="0.01" 
                               class="col-span-3 px-3 py-2 bg-gray-800 border border-gray-600 rounded-lg text-white text-sm focus:outline-none focus:border-blue-500">
                        <input type="number" id="portfolio-price" placeholder="Prix" step="0.01" 
                               class="col-span-4 px-3 py-2 bg-gray-800 border border-gray-600 rounded-lg text-white text-sm focus:outline-none focus:border-blue-500">
                        <button onclick="addPosition()" class="col-span-2 btn-primary rounded-lg font-bold text-sm">‚ûï</button>
                    </div>
                </div>
                
                <div id="portfolio-summary" class="max-h-96 overflow-y-auto"></div>
            </div>
            
            <!-- PANEL 5: HEATMAP (Full Width) -->
            <div class="tool-panel rounded-lg p-6 lg:col-span-2">
                <div class="tool-header flex justify-between items-center pb-4 mb-4">
                    <h3 class="text-xl font-bold flex items-center gap-2">
                        <i class="fas fa-fire text-red-400"></i> Heatmap Corr√©lations
                    </h3>
                    <button onclick="generateHeatmap()" class="btn-primary px-4 py-2 rounded-lg font-bold">
                        üìä G√©n√©rer
                    </button>
                </div>
                
                <div id="heatmap-container" style="height: 500px;"></div>
                <div id="heatmap-insights" class="mt-4"></div>
            </div>
            
        </div>
        
    </div>
    
    <!-- Footer -->
    <footer class="bg-gray-800 mt-8 py-4">
        <div class="container mx-auto px-4 text-center text-gray-400 text-sm">
            ¬© 2025 Ploutos V8 Oracle - AI Trading System
        </div>
    </footer>
    
    <script src="{{ url_for('static', filename='tools.js') }}"></script>
    
</body>
</html>
