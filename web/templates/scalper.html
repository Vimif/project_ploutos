<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scalper Pro - Ploutos</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        body {
            background: #0a0e1a;
            color: #e5e7eb;
            font-family: 'Inter', -apple-system, sans-serif;
        }
        .glass {
            background: rgba(17, 24, 39, 0.8);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(55, 65, 81, 0.5);
        }
        .signal-buy {
            background: linear-gradient(135deg, #00f260, #0575e6);
            animation: pulse-buy 2s infinite;
        }
        .signal-sell {
            background: linear-gradient(135deg, #ff4757, #ff6348);
            animation: pulse-sell 2s infinite;
        }
        .signal-neutral {
            background: linear-gradient(135deg, #4b5563, #6b7280);
        }
        @keyframes pulse-buy {
            0%, 100% { box-shadow: 0 0 20px rgba(0, 242, 96, 0.5); }
            50% { box-shadow: 0 0 40px rgba(0, 242, 96, 0.8); }
        }
        @keyframes pulse-sell {
            0%, 100% { box-shadow: 0 0 20px rgba(255, 71, 87, 0.5); }
            50% { box-shadow: 0 0 40px rgba(255, 71, 87, 0.8); }
        }
        .tf-active {
            background: #3b82f6;
            box-shadow: 0 0 15px rgba(59, 130, 246, 0.6);
        }
        .heatmap-cell {
            transition: all 0.3s;
            cursor: pointer;
        }
        .heatmap-cell:hover {
            transform: scale(1.05);
        }
        .metric-card {
            position: relative;
            overflow: hidden;
        }
        .metric-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
            animation: shimmer 3s infinite;
        }
        @keyframes shimmer {
            100% { left: 100%; }
        }
        .level-line {
            height: 2px;
            position: relative;
            margin: 4px 0;
        }
        .level-resistance { background: #ef4444; }
        .level-support { background: #10b981; }
        .level-poc { background: #8b5cf6; height: 3px; }
        
        /* Scrollbar custom */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: #1f2937; }
        ::-webkit-scrollbar-thumb { background: #4b5563; border-radius: 3px; }
        ::-webkit-scrollbar-thumb:hover { background: #6b7280; }
    </style>
</head>
<body class="p-4">
    
    <!-- Header -->
    <div class="glass rounded-xl p-4 mb-4 flex justify-between items-center">
        <div class="flex items-center gap-4">
            <h1 class="text-3xl font-bold bg-gradient-to-r from-green-400 via-blue-500 to-purple-600 bg-clip-text text-transparent">
                ‚ö° SCALPER PRO
            </h1>
            <div class="flex gap-2">
                <input type="text" id="ticker-input" value="AAPL" 
                       class="bg-gray-800 px-4 py-2 rounded-lg border border-gray-600 focus:border-blue-500 outline-none w-24 text-center font-mono text-lg font-bold uppercase"
                       placeholder="SYMBOL">
                <button id="analyze-btn" class="bg-blue-600 hover:bg-blue-700 px-6 py-2 rounded-lg font-bold transition">
                    üîç ANALYSER
                </button>
            </div>
        </div>
        
        <div class="flex items-center gap-4">
            <!-- Auto-refresh toggle -->
            <label class="flex items-center gap-2 cursor-pointer">
                <input type="checkbox" id="auto-refresh" checked class="w-4 h-4">
                <span class="text-sm">Auto-refresh 30s</span>
            </label>
            
            <!-- Sound alerts toggle -->
            <label class="flex items-center gap-2 cursor-pointer">
                <input type="checkbox" id="sound-alerts" class="w-4 h-4">
                <span class="text-sm">üîä Alertes</span>
            </label>
            
            <div class="text-sm text-gray-400">
                <i class="fas fa-sync-alt" id="refresh-icon"></i> 
                <span id="last-update">-</span>
            </div>
        </div>
    </div>
    
    <div class="grid grid-cols-12 gap-4">
        
        <!-- LEFT: Main Chart + Multi-TF -->
        <div class="col-span-8 space-y-4">
            
            <!-- Multi-Timeframe Selector -->
            <div class="glass rounded-xl p-3">
                <div class="text-xs text-gray-400 mb-2 font-bold">‚è±Ô∏è TIMEFRAMES</div>
                <div class="flex gap-2">
                    <button class="tf-btn px-4 py-2 rounded-lg bg-gray-700 hover:bg-gray-600 transition font-mono" data-tf="5m">5m</button>
                    <button class="tf-btn px-4 py-2 rounded-lg bg-gray-700 hover:bg-gray-600 transition font-mono" data-tf="15m">15m</button>
                    <button class="tf-btn tf-active px-4 py-2 rounded-lg transition font-mono" data-tf="1h">1h</button>
                    <button class="tf-btn px-4 py-2 rounded-lg bg-gray-700 hover:bg-gray-600 transition font-mono" data-tf="4h">4h</button>
                    <button class="tf-btn px-4 py-2 rounded-lg bg-gray-700 hover:bg-gray-600 transition font-mono" data-tf="1d">1D</button>
                    <div class="flex-1"></div>
                    <div class="text-sm flex items-center gap-3">
                        <span class="text-gray-400">Signal:</span>
                        <div id="tf-signal-badge" class="signal-neutral px-4 py-1 rounded-lg font-bold text-sm">HOLD</div>
                    </div>
                </div>
            </div>
            
            <!-- Main Chart -->
            <div class="glass rounded-xl p-4">
                <div id="main-chart" style="height: 450px;"></div>
            </div>
            
            <!-- Heatmap des Zones de Prix -->
            <div class="glass rounded-xl p-4">
                <h3 class="font-bold mb-3 flex items-center gap-2">
                    üî• HEATMAP - Zones de Prix Critiques
                </h3>
                <div id="price-heatmap" class="grid grid-cols-10 gap-1"></div>
                <div class="flex justify-between text-xs text-gray-400 mt-2">
                    <span>üü¢ Support Fort</span>
                    <span>üü° Neutre</span>
                    <span>üî¥ R√©sistance Forte</span>
                </div>
            </div>
            
        </div>
        
        <!-- RIGHT: Signals + Metrics -->
        <div class="col-span-4 space-y-4">
            
            <!-- SIGNAL PRINCIPAL -->
            <div class="glass rounded-xl p-6 text-center">
                <div class="text-sm text-gray-400 mb-2">SIGNAL PRINCIPAL</div>
                <div id="main-signal" class="text-6xl font-bold mb-2">-</div>
                <div id="main-signal-text" class="signal-neutral px-6 py-3 rounded-xl font-bold text-xl mb-3">ATTENTE</div>
                <div class="grid grid-cols-2 gap-2 text-sm">
                    <div class="bg-gray-800 p-2 rounded">
                        <div class="text-gray-400">Entr√©e</div>
                        <div id="entry-price" class="font-mono font-bold">-</div>
                    </div>
                    <div class="bg-gray-800 p-2 rounded">
                        <div class="text-gray-400">Stop Loss</div>
                        <div id="stop-loss" class="font-mono font-bold text-red-400">-</div>
                    </div>
                    <div class="bg-gray-800 p-2 rounded">
                        <div class="text-gray-400">Take Profit</div>
                        <div id="take-profit" class="font-mono font-bold text-green-400">-</div>
                    </div>
                    <div class="bg-gray-800 p-2 rounded">
                        <div class="text-gray-400">R:R Ratio</div>
                        <div id="rr-ratio" class="font-mono font-bold">-</div>
                    </div>
                </div>
            </div>
            
            <!-- Position Sizing Calculator -->
            <div class="glass rounded-xl p-4">
                <h3 class="font-bold mb-3 flex items-center gap-2">
                    üí∞ RISK CALCULATOR
                </h3>
                <div class="space-y-2 text-sm">
                    <div class="flex justify-between">
                        <label>Capital √† risquer:</label>
                        <input type="number" id="risk-amount" value="1000" class="bg-gray-800 px-2 py-1 rounded w-24 text-right">
                    </div>
                    <div class="flex justify-between">
                        <label>Risk %:</label>
                        <input type="number" id="risk-percent" value="2" class="bg-gray-800 px-2 py-1 rounded w-16 text-right" step="0.1">%
                    </div>
                    <hr class="border-gray-700">
                    <div class="flex justify-between font-bold">
                        <span>Position Size:</span>
                        <span id="position-size" class="text-blue-400">-</span>
                    </div>
                    <div class="flex justify-between font-bold">
                        <span>Max Loss:</span>
                        <span id="max-loss" class="text-red-400">-</span>
                    </div>
                    <div class="flex justify-between font-bold">
                        <span>Profit Potentiel:</span>
                        <span id="potential-profit" class="text-green-400">-</span>
                    </div>
                </div>
            </div>
            
            <!-- Order Flow Analysis -->
            <div class="glass rounded-xl p-4">
                <h3 class="font-bold mb-3 flex items-center gap-2">
                    üìä ORDER FLOW
                </h3>
                <div class="space-y-3">
                    <div>
                        <div class="flex justify-between text-xs mb-1">
                            <span>Pression Achat</span>
                            <span id="buy-pressure-pct" class="font-bold">-</span>
                        </div>
                        <div class="w-full bg-gray-700 rounded h-3">
                            <div id="buy-pressure-bar" class="bg-green-500 h-3 rounded transition-all" style="width: 0%"></div>
                        </div>
                    </div>
                    <div>
                        <div class="flex justify-between text-xs mb-1">
                            <span>Pression Vente</span>
                            <span id="sell-pressure-pct" class="font-bold">-</span>
                        </div>
                        <div class="w-full bg-gray-700 rounded h-3">
                            <div id="sell-pressure-bar" class="bg-red-500 h-3 rounded transition-all" style="width: 0%"></div>
                        </div>
                    </div>
                    <div class="text-center">
                        <div class="text-xs text-gray-400">Volume Ratio</div>
                        <div id="volume-ratio" class="text-2xl font-bold">-</div>
                    </div>
                </div>
            </div>
            
            <!-- Key Levels -->
            <div class="glass rounded-xl p-4">
                <h3 class="font-bold mb-3 flex items-center gap-2">
                    üéØ NIVEAUX CL√âS
                </h3>
                <div id="key-levels" class="space-y-1 text-sm max-h-64 overflow-y-auto">
                    <!-- Dynamically populated -->
                </div>
            </div>
            
            <!-- Quick Indicators -->
            <div class="glass rounded-xl p-4">
                <h3 class="font-bold mb-3 flex items-center gap-2">
                    üìà INDICATEURS RAPIDES
                </h3>
                <div class="grid grid-cols-2 gap-2 text-xs">
                    <div class="metric-card bg-gray-800 p-2 rounded">
                        <div class="text-gray-400">RSI (14)</div>
                        <div id="rsi-value" class="font-bold text-lg">-</div>
                    </div>
                    <div class="metric-card bg-gray-800 p-2 rounded">
                        <div class="text-gray-400">MACD</div>
                        <div id="macd-signal" class="font-bold text-lg">-</div>
                    </div>
                    <div class="metric-card bg-gray-800 p-2 rounded">
                        <div class="text-gray-400">ADX</div>
                        <div id="adx-value" class="font-bold text-lg">-</div>
                    </div>
                    <div class="metric-card bg-gray-800 p-2 rounded">
                        <div class="text-gray-400">Volume</div>
                        <div id="volume-change" class="font-bold text-lg">-</div>
                    </div>
                </div>
            </div>
            
        </div>
        
    </div>
    
    <!-- Audio pour alertes -->
    <audio id="alert-sound" preload="auto">
        <source src="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBCqJ0fPTgjgIHWe778GSUAwGZJZw=" type="audio/wav">
    </audio>
    
    <script src="{{ url_for('static', filename='scalper.js') }}"></script>
    
</body>
</html>
